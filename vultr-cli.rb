# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class VultrCli < Formula
  desc "Official command-line tool for Vultr services"
  homepage "https://github.com/vultr/vultr-cli"
  version "3.1.0"

  on_macos do
    on_intel do
      url "https://github.com/vultr/vultr-cli/releases/download/v3.1.0/vultr-cli_v3.1.0_macOs_amd64.tar.gz"
      sha256 "c5e9a96b0f6c306538e45bd71f5120137f5465880d0aee9b9bd812f47fc3dc9f"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
    on_arm do
      url "https://github.com/vultr/vultr-cli/releases/download/v3.1.0/vultr-cli_v3.1.0_macOs_arm64.tar.gz"
      sha256 "6aefa532c319c462b2a72e25c54dac406ee4d6441f2efddea260cdb6505c9eca"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.1.0/vultr-cli_v3.1.0_linux_amd64.tar.gz"
        sha256 "ad2ce4a6672ff8deaf0981e892770230db70c43a1946d950fb7b10faf2d94a2d"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
    on_arm do
      if !Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.1.0/vultr-cli_v3.1.0_linux_arm32-v6.tar.gz"
        sha256 "fa460c8c81351260c6791c4f7e251d60f757ac44bae870f6a2e74da84dd1d060"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.1.0/vultr-cli_v3.1.0_linux_arm64.tar.gz"
        sha256 "7df5ce7b402ab80879760a0448a60e6f1c06c1284ae07aac4c2d50091ef7a66d"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
  end

  test do
    output = shell_output("#{bin}/vultr-cli version 2>&1", 1)
    assert_match "Please export your VULTR API key as an environment variable or add `api-key` to your config file, eg:\nexport VULTR_API_KEY='<api_key_from_vultr_account>'\n", output
  end
end
