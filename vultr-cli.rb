# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class VultrCli < Formula
  desc "Official command-line tool for Vultr services"
  homepage "https://github.com/vultr/vultr-cli"
  version "2.19.0"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/vultr/vultr-cli/releases/download/v2.19.0/vultr-cli_v2.19.0_macOs_arm64.tar.gz"
      sha256 "1d16eacdc10c31cfb3caad915791c018d99a1f41b5f718c237656ecc152f1cf9"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/vultr/vultr-cli/releases/download/v2.19.0/vultr-cli_v2.19.0_macOs_amd64.tar.gz"
      sha256 "c8399f37721ae8fd9ecc8bab8d22721cbe2c71a46015221946434956aeb63e56"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/vultr/vultr-cli/releases/download/v2.19.0/vultr-cli_v2.19.0_linux_amd64.tar.gz"
      sha256 "4b19b64e5dd45c4a6b88692c726ccb6edc162f228f0e7b80acc3a43326e94665"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/vultr/vultr-cli/releases/download/v2.19.0/vultr-cli_v2.19.0_linux_arm32-v6.tar.gz"
      sha256 "ac5293e8c8ec45569d1d7085d34fa1b5d45a2f983cc85cd63bd07ce872ee2843"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/vultr/vultr-cli/releases/download/v2.19.0/vultr-cli_v2.19.0_linux_arm64.tar.gz"
      sha256 "dfefbd8478626d67d400b9c523ee818ee04c2c0f1c39738358d238ef33a18726"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
  end

  test do
    output = shell_output("#{bin}/vultr-cli version 2>&1", 1)
    assert_match "Please export your VULTR API key as an environment variable or add `api-key` to your config file, eg:\nexport VULTR_API_KEY='<api_key_from_vultr_account>'\n", output
  end
end
