# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class VultrCli < Formula
  desc "Official command-line tool for Vultr services"
  homepage "https://github.com/vultr/vultr-cli"
  version "3.2.0"

  on_macos do
    on_intel do
      url "https://github.com/vultr/vultr-cli/releases/download/v3.2.0/vultr-cli_v3.2.0_macOs_amd64.tar.gz"
      sha256 "8479ce8d6dc23e8334eada2125eab7b40c8d4ea1afaa97db625e12c7d876e7a8"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
    on_arm do
      url "https://github.com/vultr/vultr-cli/releases/download/v3.2.0/vultr-cli_v3.2.0_macOs_arm64.tar.gz"
      sha256 "9e84d87606e9c4d2f978ac42e9c74d511f9c9766b4f8555e6df3974f21f876aa"

      def install
        bin.install "vultr-cli"
        prefix.install_metafiles
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.2.0/vultr-cli_v3.2.0_linux_amd64.tar.gz"
        sha256 "4627a2f4dd531798b2b1db18b1557b3d1e58566cc637832a4c42ee492f90712a"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
    on_arm do
      if !Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.2.0/vultr-cli_v3.2.0_linux_arm32-v6.tar.gz"
        sha256 "4fd11d35f5b4da1b82e8af8a1927c33aa3de7f8eff52d72b5fd817a252ad2882"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/vultr/vultr-cli/releases/download/v3.2.0/vultr-cli_v3.2.0_linux_arm64.tar.gz"
        sha256 "ee728b2798cc942d37b027941a2b4159399fd7cd61cc8bf4b3c19aa91781353e"

        def install
          bin.install "vultr-cli"
          prefix.install_metafiles
        end
      end
    end
  end

  test do
    output = shell_output("#{bin}/vultr-cli version 2>&1", 1)
    assert_match "Please export your VULTR API key as an environment variable or add `api-key` to your config file, eg:\nexport VULTR_API_KEY='<api_key_from_vultr_account>'\n", output
  end
end
